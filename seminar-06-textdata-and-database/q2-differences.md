# ВОПРОС 2. ОТЛИЧИЕ РЕЛЯЦИОННЫХ И НЕРЕЛЯЦИОННЫХ МОДЕЛЕЙ ДАННЫХ

## 1. ОБЩИЕ ПОНЯТИЯ

**Модель данных** — структура организации и хранения данных в базах данных. Она определяет способы взаимодействия с этими данными, методы управления ими и ограничения, накладываемые на хранение и извлечение информации.

### Реляционная модель (SQL):

- Теоретическая основа была заложена Эдгаром Коддом в 1970 году в его работе «A Relational Model of Data for Large Shared Data Banks».
- Данные представляются в виде набора *таблиц (отношений)*, состоящих из *строк (записей)* и *столбцов (атрибутов)*. Каждая строка имеет уникальный идентификатор — *первичный ключ*. Связи между таблицами устанавливаются с помощью *внешних ключей*.
- Процесс минимизации избыточности данных путем разделения информации на несколько взаимосвязанных таблиц.
- Теория множеств и реляционная алгебра. Все операции над данными — это операции над множествами.
- Для взаимодействия с реляционными БД используется унифицированный язык запросов *SQL (Structured Query Language)*.

### Нереляционная модель (NoSQL):

- Термин «NoSQL» стал известен в конце 2000-х годов, хотя некоторые технологии существовали и раньше. Это связано с потребностями таких компаний, как Google, Amazon и Facebook, которые столкнулись с ограничениями реляционных СУБД при работе с эксабайтами данных.
- Отказ от жестких табличных схем и реляционных принципов в пользу более гибких моделей. NoSQL часто расшифровывают как *«Not Only SQL»*, что подчеркивает дополняющий характер этих технологий.
- Хранят данные в виде документов, каждый документ содержит всю необходимую информацию без необходимости нормализаций. Организуют данные вертикально, группируя значения по столбцам вместо традиционных строк.
- Простая пара *ключ-значение*, где каждое значение ассоциировано с уникальным ключом.
- Отсутствие единой теории. Разные типы NoSQL-БД основаны на различных структурах данных: хэш-таблицах, документах, графах и т.д.

### Типы нереляционных баз данных

В отличие от SQL, мир NoSQL неоднороден и включает несколько специализированных типов:

- **Документные БД (MongoDB, Couchbase):**
  - Хранят данные в виде документов (JSON, BSON, XML).
  - Каталоги товаров, пользовательские профили, системы контент-менеджмента.

- **БД «Ключ-Значение» (Redis, Amazon DynamoDB):**
  - Простейшая модель. Значение сохраняется и извлекается по уникальному ключу.
  - Кэширование, сессии, корзины покупок, счетчики.

- **Колоночные БД (Cassandra, HBase):**
  - Хранят данные не по строкам, а по столбцам. Это позволяет очень быстро агрегировать данные по конкретным колонкам.
  - Аналитика больших данных, системы сбора метрик.

- **Графовые БД (Neo4j, Amazon Neptune):**
  - Хранят данные в виде узлов, ребер и свойств. Узлы представляют сущности, а ребра — связи между ними.
  - Социальные сети, рекомендательные системы, обнаружение мошенничества, графовые запросы.

## 2. ДЕТАЛЬНОЕ СРАВНЕНИЕ ПО КЛЮЧЕВЫМ ПАРАМЕТРАМ

### 1. Модель данных

**Реляционные БД:**  
Требуют тщательного проектирования схемы до начала работы с данными. Все данные должны вписываться в заранее определенные таблицы с четкими типами данных для каждого столбца. Попытка записать строку, не соответствующую схеме, приведет к ошибке.

**Нереляционные БД:**  
Используют гибкую, динамическую схему. Данные могут добавляться без предварительного описания их структуры.

### 2. Масштабирование

**Реляционные БД:**  
Используют **вертикальное масштабирование (Scale-Up)**. Для увеличения производительности необходимо добавить ресурсов существующему серверу: более мощный процессор, больше оперативной памяти, более быстрые диски (SSD).

**Нереляционные БД:**  
Спроектированы для **горизонтального масштабирования (Scale-Out)**. Для увеличения производительности в кластер добавляются новые, относительно недорогие серверы. Данные распределяются между этими серверами.

### 3. Язык запросов

**Реляционные БД:**  
Используют мощный и стандартизированный язык *SQL*. Он является декларативным: пользователь описывает *что* он хочет получить, а не *как* это сделать.

**Нереляционные БД:**  
Универсального стандарта не существует. Каждая БД использует свой собственный API или язык запросов.

### 4. Транзакции и целостность данных (ACID и BASE)

**Реляционные БД:**  
Строго следуют принципу *ACID*:

- **A (Atomicity) — Атомарность:** транзакция выполняется целиком или не выполняется вовсе.
- **C (Consistency) — Согласованность:** транзакция переводит базу из одного целостного состояния в другое.
- **I (Isolation) — Изолированность:** параллельные транзакции не мешают друг другу.
- **D (Durability) — Долговечность:** результаты завершенной транзакции сохраняются навсегда.

Полная гарантия целостности данных, даже в условиях сбоев и параллельного доступа.

**Нереляционные БД:**  
Часто следуют принципу *BASE*:

- **BA (Basically Available) — Базово доступна:** система гарантирует доступность данных даже в ущерб согласованности.
- **S (Soft state) — «Мягкое» состояние:** состояние системы может меняться со временем даже без ввода новых данных (из-за репликации и задержек).
- **E (Eventual consistency) — Согласованность в конечном счете:** если в систему не вносятся новые изменения, то через некоторое время все узлы кластера придут к согласованному состоянию.

Более высокая производительность и доступность в ущерб немедленной согласованности.

## 3. СРАВНИТЕЛЬНАЯ ТАБЛИЦА

**Таблица 1**

| Критерий | Реляционные Базы Данных (SQL) | Нереляционные Базы Данных (NoSQL) |
|----------|-------------------------------|-----------------------------------|
| **Модель данных** | Жесткая, табличная. Строгая схема. | Гибкая. Отсутствие единой схемы (Schema-less). |
| **Схема** | Предопределена до внесения данных. Изменение сложно. | Динамическая. Может изменяться «на лету». |
| **Масштабирование** | Вертикальное (Scale-Up) | Горизонтальное (Scale-Out) |
| **Язык запросов** | Стандартизированный SQL | Специфичные API и языки запросов |
| **Транзакции и целостность** | ACID | BASE |
| **Структура и типы** | Один тип: таблицы. | Множество типов: документные, ключ-значение, графовые, колоночные. |

Выбор подходящей модели данных зависит от специфики проекта, ожидаемых объемов данных, уровня сложности бизнес-правил и требований к производительности. Для классических корпоративных приложений с четкими правилами обработки данных предпочтительны реляционные базы данных. Однако современные высоконагруженные проекты выигрывают от преимуществ нереляционных решений, обеспечивающих большую гибкость и эффективность работы с большими массивами данных.

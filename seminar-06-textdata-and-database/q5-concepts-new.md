# Концепции целостности и надежности в системах хранения данных

## 1. Типы целостности данных

Целостность данных является фундаментальным аспектом систем хранения данных и может быть разделена на следующие типы:

### Физическая целостность

- Защита от физического повреждения носителей
- Контроль целостности при передаче данных
- Использование контрольных сумм и ECC (Error Checking and Correction)

### Логическая целостность

- **Целостность сущностей**: уникальность первичных ключей
- **Ссылочная целостность**: корректность связей между таблицами
- **Доменная целостность**: соответствие данных определенным типам и ограничениям

### Семантическая целостность

- Соответствие бизнес-правилам
- Проверка корректности значений
- Валидация на уровне приложения

## 2. Уровни изоляции, аномалии и стратегии

### Уровни изоляции транзакций

1. **Read Uncommitted** (чтение незафиксированных данных)
2. **Read Committed** (чтение фиксированных данных)
3. **Repeatable Read** (повторяемое чтение)
4. **Serializable** (сериализуемость)

### Аномалии параллельного доступа

- **Грязное чтение** (Dirty Read)
  > Транзакция читает данные, которые еще не зафиксированы другой транзакцией

- **Неповторяемое чтение** (Non-repeatable Read)
  > Повторное чтение тех же данных дает другой результат

- **Фантомное чтение** (Phantom Read)
  > Появление новых строк при повторном чтении

### Стратегии обеспечения изоляции

- Блокировки (Pessimistic Locking)
- Версионирование (MVCC)
- Временные метки (Timestamp Ordering)

## 3. CAP, согласованность и распределённые транзакции

### Теорема CAP

> Невозможно одновременно обеспечить все три свойства в распределенной системе:

- **Consistency** (Согласованность)
- **Availability** (Доступность)
- **Partition Tolerance** (Устойчивость к разделению)

### Модели согласованности

- **Строгая согласованность**
- **Причинная согласованность**
- **Eventual Consistency** (Итоговая согласованность)

### Распределённые транзакции

- Двухфазный коммит (2PC)
- Трехфазный коммит (3PC)
- Saga паттерн

## 4. RPO, RTO, резервирование и тестирование

### Ключевые метрики восстановления

- **RPO** (Recovery Point Objective)
  > Максимально допустимый период потери данных

- **RTO** (Recovery Time Objective)
  > Максимально допустимое время восстановления работы

### Стратегии резервирования

- Полное резервирование
- Инкрементальное резервирование
- Дифференциальное резервирование
- Репликация данных

### Тестирование надежности

- Тестирование восстановления
- Нагрузочное тестирование
- Тестирование отказоустойчивости
- Тестирование процедур резервного копирования

## 5. Соответствие требованиям и защита персональных данных

### Нормативные требования

- **GDPR** (General Data Protection Regulation)
- **HIPAA** (Health Insurance Portability and Accountability Act)
- **PCI DSS** (Payment Card Industry Data Security Standard)

### Защита персональных данных

- Шифрование данных
- Управление доступом
- Аудит действий с данными

### Принципы обработки персональных данных

- Законность и прозрачность
- Минимизация данных
- Ограничение хранения
- Целостность и конфиденциальность

### Меры обеспечения безопасности

- Технические меры защиты
- Организационные меры
- Регулярный аудит безопасности
- Обучение персонала